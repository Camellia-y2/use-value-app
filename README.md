# **用值**
本文档详细介绍了 useValue (用值) H5 应用中已实现的所有功能模块。

## 一、产品定位
useValue 帮助用户记录高单价低频物品（如服饰、电子产品、包袋）的使用情况，通过 日均/单次成本 计算，让用户看清“真实消费”。在此基础上，引入 AI 洞察 + 闲置管理，引导用户优化资产结构，并为未来对接二手平台（如闲鱼、转转）预留入口，形成“记录 → 分析 → 运营 → 变现”闭环。

## 二、需求文档

1. **引导页**：游客/登录

- 非阻塞设计：
  - 弹窗背景半透明，首页内容隐约可见（让用户知道“这不是障碍，是选择”）
  - 3 秒后自动淡出，用户可随时从设置页重新打开
- 文案降低压力：
  - 标题：✨ “欢迎使用 用值”（而非“请登录”）
  - 副标题：*“记录物品真实成本，优化你的消费决策”*
  - 按钮文案：
    - 👤 “游客体验（数据仅存本设备）”
    - 🔑 “登录/注册（多设备同步）”
- 隐私声明：
  - 小字提示：*“游客模式下，所有数据仅存于本设备浏览器，我们无法访问。* [查看详情]*”*

1. **首页** (Home Page)：管理和查看在役资产的核心页面。

- 资产列表: 以响应式网格布局展示所有“服役中”的物品。
- 物品卡片: 展示物品图片、名称、价格、当前状态以及使用情况（已用天数或次数）。
- 置顶功能: 被置顶的物品会有明显的“📍”标记，并显示在列表最前方。
- 状态标签: 根据筛选条件，展示“已退役”或“已卖出”的状态标签。
- 筛选功能:
  - 状态筛选: 可在“服役中”、“已退役”、“闲置”、“已卖出”之间切换
  - 类型筛选: 可筛选“按天计”或“按次计”的物品。
  - 标签筛选：数码、箱包、服饰。。。
  - 快捷操作 (按次计物品):     
    +/ - 按钮: 在卡片上直接增加或减少使用次数。     
    实时更新: 每次点击后，界面会立即重新计算并更新“单次成本”，无需等待刷新。
  - 搜索入口:  搜索图标: 点击顶部导航栏的放大镜图标，进入独立的搜索页面。
  - 底部导航栏: 在首页、归档、AI 管家、统计和设置页面间切换。
  - 物品详情: 点击任意物品卡片即可打开物品详情浮层。

1. **搜索页** (Search Page)：查找资产的独立页面。

- 搜索输入框: 全宽的搜索栏，进入页面自动聚焦。
  - 实时筛选: 输入关键字时，下方的物品网格会实时更新，显示匹配名称的物品
  - 空状态: 提供初始提示，或在未找到结果时显示提示信息。
  - 交互: 点击搜索结果中的物品，直接打开该物品的 物品详情页。
  - 返回: 点击返回按钮，返回到首页。

1. **物品详情页** (Item Detail Page)：单个资产的详细信息视图。

- 浮层交互: 采用流畅的底部滑入动画。
- 概览区域:

​        大尺寸物品头像（支持上传图片或默认占位图）-  扩展（抠图、原图、按格式）。

​        可编辑名称: 点击名称可直接修改。

​        核心成本: 醒目展示当前的 **日均成本** 或 **单次成本**。

​        副标题: 展示总价和总使用量（天数/次数）。

- 编辑模式:

​        点击右上角 “✎” 图标进入编辑模式。

​        支持修改: 图片、名称、价格、购买日期、类别、标签、按次/天切换。

​        自动重算: 保存修改后，系统会自动根据新的价格和日期/次数重新计算日均成本。

- 成本趋势图:

​        交互式 SVG 曲线图，可视化展示随时间推移成本下降的趋势。

- 删除资产:

​        底部提供“删除”按钮，点击并确认后可永久删除该资产。提供**二次确认**。

1. **添加物品页** (Add Item Page)：录入新资产的界面。

- 基础信息:
  -  名称: 物品名称。
  - 价格: 购买价格。
  - 日期/次数: 购买日期（按天计）或 初始使用次数（按次计）。
  - 类别: 选择物品类别（如电子产品、服饰鞋包等）。
- 计费模式:
  - 分段控制器: 在“按天计”和“按次计”之间切换。
- 图片上传：
  - 选择文件: 从本地设备上传图片。
  - 预览: 上传后即时预览。
  - 处理模式: 提供**“原图”、“边框”、“抠图”**三种模式选择（目前为视觉UI）。
- 高级选项:
  - 置顶: 将物品固定在列表顶部。
  - 不计入总资产: 该物品价格不计入统计页的总资产。
  - 不计入日均: 该物品成本不计入统计页的日均成本。
  - 状态: 创建时即可标记为“已退役”、“已闲置”、“已卖出”。

1. **AI 管家页（值仔）**（AI Insights）— 核心页面

- 功能（对话会一直保留，且当ai发信息过来，下面导航栏图标会有消息的红点）
  - 对话：
    - 支持用户提问如：“我的 iPhone 要用多久才能回本？”、“这件衣服值不值？”
    - 基于结构化资产数据 + 成本公式（日均成本 = 价格 / 使用天数），实时生成精准、可计算、带行动建议的回答。
    - 采用关键词意图识别 + 模糊匹配（fuzzysort）+ 自然语言模板实现类对话体验。
  - **AI** **主动****推送洞察**（对话气泡样式）：
  - ​          💬 “检测到您有 3 件物品闲置超过 30 天，考虑出售吗？[查看详情]”

  - ​          💬 “您的「AirPods Pro」过去 7 天仅使用 1 次，建议标记为闲置。”

  - 通知来源：
    - ​        闲置超期（idleSince < now - 30天）--可在设置页自定义

    - ​        使用频次过低（按次计物品：N 天内 ≤ 1 次）--可在设置页自定义
- 交互：
  - 点击“查看详情” → 展开具体物品列表
  - 每件物品提供：“恢复使用” / “一键发布”（当前灰显）
  - **每条建议提供操作入口（“查看详情”“标记闲置”）和反馈按钮（👍/👎）**
- 未来集成说明：
  -  “一键发布”按钮 tooltip：“即将支持闲鱼、转转一键发布”
  - 技术预留：/api/integrations/xianyu/publish 接口路径

1. **统计页** (Stats Page)：资产数据的可视化分析。

- 核心指标: 展示所有在役资产的 日均/次均 使用总成本。
- 数据卡片:
  - 资产总值: 所有物品的购买总价。
  - 在役数量: 当前正在使用的物品数量。
- 图表分析:
  - 支出占比: 不同类别（电子产品、服饰、其他）的支出百分比进度条。
  - 年度支出趋势？？？: 柱状图展示每月的支出/使用趋势。

1. **榨干页** (Archive Page)：展示用户从物品中提取的全部价值，强化成就感。

> 页面定位：替代原"归档页"，聚焦展示用户已从物品中获取全部价值的成就

- 顶部成就卡片
  - 展示总榨干价值（已退役+已卖出物品总价）
  - 显示当前里程碑标识（如"🌱 初榨者"）--- 在设置页面账号也要显示，并且点击出现模态框
  - 点击卡片触发模态框，展示详细成就信息
- 物品分类展示
  - 分两组展示： 🔵 已退役物品（状态为`retired`） 🔴 已卖出物品（状态为`sold`）
- 里程碑系统
  - 自动解锁成就（基于累计榨干价值）：
  - ```JSON
    [
      {"id": "first_drain", "title": "初榨者", "icon": "🌱", "threshold": 0},
      {"id": "thousand_yuan", "title": "千元榨取者", "icon": "💰", "threshold": 1000},
      {"id": "five_thousand", "title": "五千榨取者", "icon": "🔥", "threshold": 5000}
    ]
    ```

  - 成就状态实时更新，解锁时触发通知提醒
- 交互设计
  - 顶部卡片点击弹窗：
  - > - 🎉 恭喜你榨干价值 ¥12,700.00！ 共完成 6 件物品的全部价值提取 ✨ 平均每件物品榨取价值 ¥2,116.67

  -   点击物品同样可以查看详情和删除。

1. **设置页** (Settings Page)：应用个性化配置。

- 顶部账号：
  - 游客：头像默认 + 游客 
  - 非游客：头像 + 昵称
  - 加上“榨干里程碑”的标
- 主题设置: 切换 浅色 (Light)、深色 (Dark) 或 跟随系统 (Auto) 模式。
- 国际化：该设置直接同步到所有页面。
  - 语言: 切换应用语言 (中文/English/韩文/繁体中文/日文)。
  - 货币单位: 通过底部抽屉 (Drawer) 选择显示货币 (CNY, USD 等)。
- 自动闲置检测设置：
  - 开关（默认开启）
  - 时间阈值：7天 / 14天 / 30天 / 自定义
- 闲置资产设置：
  - “是否计入总资产”：开关（默认关闭）
  - “闲置超 30 天（和时间阈值绑定）提醒”：开关（默认开启）
- 升级账号：（仅游客）
  - 升级时自动迁移数据 + 提示 “数据将加密同步”
- 导入导出数据：
  - 导出加密 JSON 文件
  - 导出成功出现弹窗提示，“发送给朋友”，用户点击，生成短链接
  - 朋友打开链接 → 自动导入数据
- 二手平台集成（占位）：
  - “闲鱼/转转授权”（预留未来入口）